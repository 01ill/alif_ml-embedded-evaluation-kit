NOTE! Update submodules before building:
git submodule init
git submodule update

NOTE! Generate micronet/mobilenet models 1st with:
python set_up_default_resources.py --additional-ethos-u-config-name ethos-u55-256

NOTE! All should normally build as Release for full-speed operation. In particular,
this enables auto-vectorization for ARMCLANG. Images can still be debugged with
reasonable success, but CMAKE_BUILD_TYPE can be changed to Debug if necessary.

The port supports either UART2 or UART4 for either RTSS, defaulting to UART2 always.
The instructions for the HE keyword-spotting select UART4 on the assumption that this
will be run in parallel with the HP image classification using UART2.

; ------------ Image classification on CM55-HP with ARMCLANG ---------------------
cmake -DTARGET_PLATFORM=ensemble \
-DTARGET_SUBSYSTEM=RTSS-HP \
-DCMAKE_TOOLCHAIN_FILE=scripts/cmake/toolchains/bare-metal-armclang.cmake \
-DUSE_CASE_BUILD=alif_img_class \
-DCMAKE_BUILD_TYPE=Release -DLOG_LEVEL=LOG_LEVEL_DEBUG ..

; ------------ Image classification on CM55-HP with GCC --------------------------
cmake -DTARGET_PLATFORM=ensemble \
-DTARGET_SUBSYSTEM=RTSS-HP \
-DCMAKE_TOOLCHAIN_FILE=scripts/cmake/toolchains/bare-metal-gcc.cmake \
-DUSE_CASE_BUILD=alif_img_class \
-DCMAKE_BUILD_TYPE=Release -DLOG_LEVEL=LOG_LEVEL_DEBUG ..

make ethos-u-alif_img_class -j




; ------------ Keyword spotting on CM55-HE ARMCLANG ----------------------
cmake -DTARGET_PLATFORM=ensemble \
-DTARGET_SUBSYSTEM=RTSS-HE \
-DCONSOLE_UART=4 \
-DCMAKE_TOOLCHAIN_FILE=scripts/cmake/toolchains/bare-metal-armclang.cmake \
-DUSE_CASE_BUILD=kws \
-DCMAKE_BUILD_TYPE=Release -DLOG_LEVEL=LOG_LEVEL_DEBUG ..

; ------------Keyword spotting on CM55-HE GCC ----------------------------
cmake -DTARGET_PLATFORM=ensemble \
-DTARGET_SUBSYSTEM=RTSS-HE \
-DCONSOLE_UART=4 \
-DCMAKE_TOOLCHAIN_FILE=scripts/cmake/toolchains/bare-metal-gcc.cmake \
-DUSE_CASE_BUILD=kws \
-DCMAKE_BUILD_TYPE=Release -DLOG_LEVEL=LOG_LEVEL_DEBUG ..

make ethos-u-kws -j20
